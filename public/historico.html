<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Histórico de Pontos</title>
  <link rel="icon" href="favicon.png" type="image/png">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-dark text-white p-4">

  <div class="container">
    <h2>Histórico de Pontos</h2>
    <ul id="lista" class="list-group mt-3"></ul>
    <a href="/ponto.html" class="btn btn-light mt-3">Voltar</a>
    <a href="/logout" class="btn btn-warning w-100 mt-3">Sair</a>
  </div>

  <script>
    fetch("/api/historico", { credentials: "same-origin" })
      .then(res => res.json())
      .then(data => {
        const lista = document.getElementById("lista");
        lista.innerHTML = "";

        if (data.length === 0) {
          const li = document.createElement("li");
          li.textContent = "Nenhum ponto registrado ainda.";
          li.className = "list-group-item bg-secondary text-white";
          lista.appendChild(li);
          return;
        }

        for (let i = 0; i < data.length; i += 2) {
          const entrada = data[i].datahora;
          const saida = data[i+1] ? data[i+1].datahora : "Ainda não saiu";

          const li = document.createElement("li");
          li.textContent = `Entrada: ${entrada} → Saída: ${saida}`;
          li.className = "list-group-item bg-secondary text-white";
          lista.appendChild(li);
        }
      });
  </script>
</body>
</html>
